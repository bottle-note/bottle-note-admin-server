name: Auto Label Issues

on:
  issues:
    types: [opened, edited]

jobs:
  auto-label:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      
    steps:
    - name: Get Labels and Issue Info
      uses: actions/github-script@v7
      with:
        script: |
          // 1. 레포지토리의 모든 라벨 가져오기
          const labels = await github.rest.issues.listLabelsForRepo({
            owner: context.repo.owner,
            repo: context.repo.repo
          });
          
          console.log('=== Repository Labels ===');
          console.log(`Total labels: ${labels.data.length}`);
          console.log('------------------------');
          labels.data.forEach(label => {
            console.log(`📌 ${label.name}`);
            console.log(`   Color: #${label.color}`);
            console.log(`   Description: ${label.description || 'No description'}`);
            console.log('');
          });
          
          // 2. 현재 이슈 정보 출력
          console.log('=== Current Issue Info ===');
          console.log(`Issue #${context.payload.issue.number}`);
          console.log(`Title: ${context.payload.issue.title}`);
          console.log(`Body: ${context.payload.issue.body || 'No body'}`);
          console.log(`Current Labels: ${context.payload.issue.labels.map(l => l.name).join(', ') || 'None'}`);
          
          // 3. 라벨 이름만 배열로
          const labelNames = labels.data.map(label => label.name);
          console.log('\n=== Label Names Array ===');
          console.log(JSON.stringify(labelNames, null, 2));
